//$service999.redistest.withsyncedinvoke

//#receive

    var ret:InvokeResult = null

    //for( i <- 0 until 5 ) {
        ////ret = syncedInvoke("newredis.incrby",3000,"key"->("kk"+i),"expire"->600)
        //ret = syncedInvoke("newredis.incrby",3000,"key"->("kk"+i))
        ////ret = syncedInvoke("newredis.get",3000,"key"->("kk"+i))
        //println(ret.toString)
    //}

    //ret = syncedInvoke("newredis.mget",3000,"keys"->ArrayBufferString("kk0","kk1","kk4","kk2","kk3"))
    //println(ret.toString)

    //ret = syncedInvoke("newredis.ping",3000)
    //println(ret.toString)

    ret = syncedInvoke("newredis.del",3000,"key"->"a")
    println(ret.toString)
    ret = syncedInvoke("newredis.set",3000,"key"->"a","value"->"123")
    println(ret.toString)

    ret = syncedInvoke("newredis.get",3000,"key"->"a")
    println(ret.toString)

    ret = syncedInvoke("newredis.exists",3000,"key"->"a")
    println(ret.toString)

    ret = syncedInvoke("newredis.expire",3000,"key"->"a","expire"->300)
    println(ret.toString)

    ret = syncedInvoke("newredis.set",3000,"key"->"b","value"->"123","expire"->300)
    println(ret.toString)
    ret = syncedInvoke("newredis.get",3000,"key"->"b")
    println(ret.toString)

    ret = syncedInvoke("newredis.incrby",3000,"key"->"c")
    println(ret.toString)

    ret = syncedInvoke("newredis.incrby",3000,"key"->"d","value"->10,"expire"->300)
    println(ret.toString)
    ret = syncedInvoke("newredis.decrby",3000,"key"->"d","value"->5)
    println(ret.toString)
    ret = syncedInvoke("newredis.getset",3000,"key"->"d","value"->"111")
    println(ret.toString)
    ret = syncedInvoke("newredis.mget",3000,"keys"->ArrayBufferString("a","b","c","d"))
    println(ret.toString)
/*
*/

/*
    ret = syncedInvoke("newredis.sadd",3000,"key"->"s1","values"->ArrayBufferString("a","我们","c","d", "c"))
    println(ret.toString)
    ret = syncedInvoke("newredis.smembers",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.srem",3000,"key"->"s1","values"->ArrayBufferString("a"))
    println(ret.toString)
    ret = syncedInvoke("newredis.smembers",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.sismember",3000,"key"->"s1","value"->"c")
    println(ret.toString)
    ret = syncedInvoke("newredis.sismember",3000,"key"->"s1","value"->"c2")
    println(ret.toString)
    ret = syncedInvoke("newredis.scard",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.sadd",3000,"key"->"s1","expire"->300,"values"->ArrayBufferString("a","我们","c","d"))
    println(ret.toString)

    println("new test ----------------")
    ret = syncedInvoke("newredis.srandmember",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.srandmember",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.spop",3000,"key"->"s1")
    println(ret.toString)
    ret = syncedInvoke("newredis.spop",3000,"key"->"s1")
    println(ret.toString)

    ret = syncedInvoke("newredis.sadd",3000,"key"->"s1","expire"->300,"values"->ArrayBufferString("a","我们","c","d"))
    println(ret.toString)
    ret = syncedInvoke("newredis.sadd",3000,"key"->"s2","expire"->300,"values"->ArrayBufferString("a","国家","c","e","f"))
    println(ret.toString)

    ret = syncedInvoke("newredis.sdiff",3000,"keys"->ArrayBufferString("s1","s2"))
    println(ret.toString)
    ret = syncedInvoke("newredis.sinter",3000,"keys"->ArrayBufferString("s1","s2"))
    println(ret.toString)
    ret = syncedInvoke("newredis.sunion",3000,"keys"->ArrayBufferString("s1","s2"))
    println(ret.toString)

    ret = syncedInvoke("newredis.sdiffstore",3000,"keys"->ArrayBufferString("ss1","s1","s2"))
    println(ret.toString)
    ret = syncedInvoke("newredis.sinterstore",3000,"keys"->ArrayBufferString("ss2","s1","s2"))
    println(ret.toString)
    ret = syncedInvoke("newredis.sunionstore",3000,"keys"->ArrayBufferString("ss3","s1","s2"))
    println(ret.toString)
*/

    /*
    ret = syncedInvoke("newredis.del",3000,"key"->"addr")
    println(ret.toString)
println("new test ----------")
    ret = syncedInvoke("newredis.hset",3000,"key"->"addr","field"->"city","value"->"shanghai")
    println(ret.toString)
    ret = syncedInvoke("newredis.hgetall",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hsetnx",3000,"key"->"addr","field"->"city","value"->"beijign")
    println(ret.toString)
    ret = syncedInvoke("newredis.hgetall",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hmset",3000,"key"->"addr","fieldvalues"->ArrayBufferMap( HashMapStringAny("key"->"postcode","value"->"121211") , HashMapStringAny("key"->"street","value"->"nanjing road") ))
    println(ret.toString)
    ret = syncedInvoke("newredis.hgetall",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hdel",3000,"key"->"addr","field"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.hmdel",3000,"key"->"addr","fields"->ArrayBufferString("city"))
    println(ret.toString)
    ret = syncedInvoke("newredis.hgetall",3000,"key"->"addr")
    println(ret.toString)
println("new read test ----------")
    ret = syncedInvoke("newredis.hlen",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hexists",3000,"key"->"addr","field"->"street")
    println(ret.toString)
    ret = syncedInvoke("newredis.hexists",3000,"key"->"addr","field"->"street2")
    println(ret.toString)
    ret = syncedInvoke("newredis.hkeys",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hvals",3000,"key"->"addr")
    println(ret.toString)
    ret = syncedInvoke("newredis.hget",3000,"key"->"addr","field"->"street")
    println(ret.toString)
println("new read test ----------")
    ret = syncedInvoke("newredis.hincrby",3000,"key"->"addr","field"->"fields","value"->"10")
    println(ret.toString)
    ret = syncedInvoke("newredis.hincrby",3000,"key"->"addr","field"->"fields","value"->"10")
    println(ret.toString)
    ret = syncedInvoke("newredis.hmget",3000,"key"->"addr","fields"->ArrayBufferString("postcode","street"))
    println(ret.toString)
    ret = syncedInvoke("newredis.hmget",3000,"key"->"addr","fields"->ArrayBufferString("postcode","abc","def","street"))
    println(ret.toString)
*/
/*
    ret = syncedInvoke("newredis.lpush",3000,"key"->"city","value"->"shanghai")
    println(ret.toString)
    ret = syncedInvoke("newredis.lpush",3000,"key"->"city","value"->"beijing")
    println(ret.toString)
    ret = syncedInvoke("newredis.lindex",3000,"key"->"city","index"->1)
    println(ret.toString)
    ret = syncedInvoke("newredis.rpop",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpush",3000,"key"->"city","value"->"nanjing")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpush",3000,"key"->"city","value"->"chongqing")
    println(ret.toString)
    ret = syncedInvoke("newredis.lindex",3000,"key"->"city","index"->1)
    println(ret.toString)
    ret = syncedInvoke("newredis.lpop",3000,"key"->"city")
    println(ret.toString)
    println("---------")
    ret = syncedInvoke("newredis.rpushx",3000,"key"->"city","value"->"nanjing")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpushx",3000,"key"->"city2","value"->"nanjing")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan","shenzhen","hangzhou","ningbo"))
    println(ret.toString)
    ret = syncedInvoke("newredis.llen",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.lpushx",3000,"key"->"city","value"->"nanjing")
    println(ret.toString)
    ret = syncedInvoke("newredis.lpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan2","shenzhen2","hangzhou2","ningbo2"))
    println(ret.toString)
    ret = syncedInvoke("newredis.llen",3000,"key"->"city")
    println(ret.toString)
    println("---------")
    ret = syncedInvoke("newredis.del",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.lpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan","shenzhen","hangzhou","ningbo"))
    println(ret.toString)
    ret = syncedInvoke("newredis.rpop",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpop",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.lrange",3000,"key"->"city","start"->"1","stop"->3)
    println(ret.toString)
    println("---------")
    ret = syncedInvoke("newredis.del",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.lpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan","shenzhen","hangzhou","ningbo","wuhan"))
    println(ret.toString)
    ret = syncedInvoke("newredis.lrem",3000,"key"->"city","count"->"7","value"->"wuhan")
    println(ret.toString)
    ret = syncedInvoke("newredis.lset",3000,"key"->"city","index"->"2","value"->"shenzhen2")
    println(ret.toString)
    ret = syncedInvoke("newredis.lrange",3000,"key"->"city","start"->"0","stop"->99)
    println(ret.toString)
    ret = syncedInvoke("newredis.linsert",3000,"key"->"city","pivot"->"hangzhou","beforeAfter"->"AFTER","value"->"lijiang")
    println(ret.toString)
    ret = syncedInvoke("newredis.linsert",3000,"key"->"city","pivot"->"hangzhou","beforeAfter"->"before","value"->"拉萨")
    println(ret.toString)
    ret = syncedInvoke("newredis.lrange",3000,"key"->"city","start"->"0","stop"->99)
    println(ret.toString)
    println("---------")

    ret = syncedInvoke("newredis.del",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan","shenzhen","hangzhou","ningbo","chengdu"))
    println(ret.toString)
    ret = syncedInvoke("newredis.blpop",3000,"keys"->ArrayBufferString("city"),"timeout"->2)
    println(ret.toString)
    ret = syncedInvoke("newredis.brpop",3000,"keys"->ArrayBufferString("city"),"timeout"->2)
    println(ret.toString)
    ret = syncedInvoke("newredis.blpop",3000,"keys"->ArrayBufferString("city2"),"timeout"->2)
    println(ret.toString)
    println("---------")

    ret = syncedInvoke("newredis.del",3000,"key"->"city")
    println(ret.toString)
    ret = syncedInvoke("newredis.rpushm",3000,"key"->"city","values"->ArrayBufferString("wuhan","shenzhen"))
    println(ret.toString)
    ret = syncedInvoke("newredis.rpoplpush",3000,"source"->"city","destination"->"city3")
    println(ret.toString)
    ret = syncedInvoke("newredis.brpoplpush",3000,"source"->"city","destination"->"city3","timeout"->2)
    println(ret.toString)


    ret = syncedInvoke("newredis.del",3000,"key"->"city")
    println(ret.toString)
    for(i <- 0 until 3 ) {
        ret = syncedInvoke("newredis.brpoplpush",40000,"source"->"city","destination"->"city3","timeout"->5)
        println(ret.toString)
    }
    reply(0)
  
*/

